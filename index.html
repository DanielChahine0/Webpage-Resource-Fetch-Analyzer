<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webpage Resource Fetch Analyzer</title>
    <meta name="description" content="Analyze and measure all resources loaded by a webpage with performance scoring">
    <meta name="author" content="Daniel Chahine">
    <meta name="keywords" content="webpage analyzer, resource analyzer, performance score, web development, SEO, optimization">
    
    <!-- Security Headers -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Webpage Resource Fetch Analyzer">
    <meta property="og:description" content="Analyze and measure all resources loaded by a webpage with performance scoring">
    <meta property="og:site_name" content="Webpage Resource Fetch Analyzer">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Webpage Resource Fetch Analyzer">
    <meta name="twitter:description" content="Analyze and measure all resources loaded by a webpage with performance scoring">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#1a1a2e">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
    <link rel="manifest" href="manifest.json">
    
    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="src/css/main.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Webpage Resource Fetch Analyzer</h1>
            <p class="subtitle">Analyze and measure all resources loaded by a webpage</p>
        </header>

        <main>
            <!-- Input Section -->
            <div class="input-section">
                <form id="analyzerForm">
                    <div class="input-group">
                        <input 
                            type="text" 
                            id="urlInput" 
                            placeholder="Enter URL (e.g., https://example.com or example.com)"
                            required
                            aria-label="Website URL"
                        >
                        <button type="submit" id="analyzeBtn" aria-label="Analyze website">
                            <span class="btn-text">Analyze</span>
                            <span class="loader" style="display: none;" aria-hidden="true"></span>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Progress Section -->
            <div id="progressSection" class="progress-section" style="display: none;" role="status" aria-live="polite">
                <div class="progress-header">
                    <h3 id="progressStatus">Loading...</h3>
                    <span id="progressText">0 / 0</span>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <div class="time-estimate">
                    <span class="time-label">Estimated time remaining:</span>
                    <span id="timeEstimate">Calculating...</span>
                </div>
                <div class="proxy-status" id="proxyStatus" style="display: none;">
                    <span class="proxy-label">Using proxy:</span>
                    <span id="proxyName">-</span>
                </div>
            </div>

            <!-- Results Section -->
            <div id="resultsSection" class="results-section" style="display: none;">
                <div class="results-header">
                    <h2>Analysis Results</h2>
                    <button id="exportBtn" class="export-btn" aria-label="Export results to CSV">
                        Export CSV
                    </button>
                </div>
                
                <!-- Performance Score Card -->
                <div id="performanceScoreCard" class="performance-score-card" role="region" aria-label="Performance Score">
                    <!-- Score will be dynamically inserted here -->
                </div>

                <!-- Load Time Estimates -->
                <div id="loadTimeEstimates" class="load-time-estimates" role="region" aria-label="Load Time Estimates" style="display: none;">
                    <!-- Load time estimates will be dynamically inserted here -->
                </div>

                <!-- Treemap Visualization -->
                <div id="treemapVisualization" class="treemap-visualization" role="region" aria-label="Resource Treemap Visualization" style="display: none;">
                    <h3>Resource Size Treemap</h3>
                    <div id="treemapContainer" class="treemap-container">
                        <!-- Treemap will be dynamically inserted here -->
                    </div>
                </div>

                <!-- Statistics Cards -->
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-value" id="totalFiles">0</div>
                        <div class="stat-label">Total Files</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalSize">0 bytes</div>
                        <div class="stat-label">Total Size</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="mainHtmlSize">0 bytes</div>
                        <div class="stat-label">Main HTML Size</div>
                    </div>
                </div>

                <!-- Resources Table -->
                <div class="resources-table-container">
                    <table id="resourcesTable">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">File Name</th>
                                <th scope="col">Type</th>
                                <th scope="col">Size</th>
                                <th scope="col">URL</th>
                            </tr>
                        </thead>
                        <tbody id="resourcesBody">
                            <!-- Resources will be dynamically inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Error Section -->
            <div id="errorSection" class="error-section" style="display: none;" role="alert">
                <div class="error-content">
                    <span class="error-icon" aria-hidden="true">!</span>
                    <p id="errorMessage"></p>
                </div>
            </div>
        </main>

        <footer>
            <p>Created by Daniel Chahine</p>
            <p class="note">Note: Due to browser CORS restrictions, this tool uses a proxy service. Some websites may not be accessible.</p>
        </footer>
    </div>

    <!-- Main Application Script (ES6 Module) -->
    <script type="module" src="src/js/app.js"></script>
</body>
</html>
